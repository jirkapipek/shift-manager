(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"0060":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"changePinForm"}},[s("h2",{attrs:{align:"center"}},[t._v("Change password")]),t.error?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v(t._s(t.error))]):t._e(),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.changeUserPin(e)}}},[s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{type:"password",placeholder:"Actual password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{type:"password",placeholder:"Repeat password"},model:{value:t.repeatPassword,callback:function(e){t.repeatPassword=e},expression:"repeatPassword"}}),t.password!==t.repeatPassword?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v("Different passwords")]):t._e(),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{type:"password",placeholder:"New password"},model:{value:t.newpassword,callback:function(e){t.newpassword=e},expression:"newpassword"}}),s("b-button",{attrs:{block:"",variant:"dark",type:"submit"}},[t._v("Change")])],1)],1)},a=[],r=s("5530"),n=s("2f62"),o={data:function(){return{password:"",repeatPassword:"",newpassword:"",error:""}},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(n["b"])(["changePin"])),Object(n["b"])(["logout"])),{},{changeUserPin:function(){var t=this,e={password:this.password,newpassword:this.newpassword};this.changePin(e).then((function(){t.logout("Your password has been changed, plese log in!")})).catch((function(e){t.error=e.response.data.msg}))}})},l=o,u=s("2877"),m=Object(u["a"])(l,i,a,!1,null,null,null);e["default"]=m.exports},"0918":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"mngshifts"}},[!0!==t.edit&&!t.editWeek&&t.showBtn?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"warning"},on:{click:function(e){return t.showNextShift()}}},[t._v("Show next shift")]):t._e(),!0!==t.edit&&t.editWeek?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"warning"},on:{click:function(e){return t.allShifts()}}},[t._v("Show all shifts")]):t._e(),s("br"),!0!==t.edit&&t.editWeek?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"primary"},on:{click:function(e){return t.previousDay()}}},[t._v("Previous day")]):t._e(),!0!==t.edit&&t.editWeek?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"primary"},on:{click:function(e){return t.nextDay()}}},[t._v("Next day")]):t._e(),!0!==t.edit&&!0!==t.add?s("b-input-group",[s("b-form-datepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{id:"filter-input",locale:"en",placeholder:"Choose a date for filter shifts"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),s("b-input-group-append",[s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{disabled:!t.keyword},on:{click:function(e){t.keyword="",t.editWeek=""}}},[t._v("Clear")])],1)],1):t._e(),s("b-card",{staticStyle:{"text-align":"center","margin-bottom":"1%"},attrs:{"bg-variant":"dark","text-variant":"white",title:"Monthly time worked"}},[s("b-card-text",[t._v(" You have worked this month "+t._s(t.time)+". ")])],1),s("div",{staticClass:"resp-table"},[!0!==t.edit&&!0!==t.add?s("b-table",{ref:"table",attrs:{items:t.items,fields:t.fields,filter:t.keyword,"sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy,"head-variant":"dark",responsive:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center text-dark my-2"},[s("b-spinner",{staticClass:"align-middle",attrs:{variant:"dark"}}),s("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(length)",fn:function(e){return[s("b",[t._v(t._s(e.item.length))])]}}],null,!1,4205104911)}):t._e()],1)],1)},a=[],r=(s("4de4"),s("7db0"),s("caad"),s("fb6a"),s("2532"),s("5530")),n=(s("96cf"),s("1da1")),o=s("2f62"),l=s("bc3a"),u=s.n(l),m={data:function(){var t=new Date;return t.setHours(1,0,0,0),{isBusy:!1,editWeek:!1,showBtn:!1,requests:[],keyword:null,edit:!1,add:!1,sortBy:"date",sortDesc:!0,id:"",date:"",time:0,editTime:t,timeFrom:"",timeTo:"",message:"",error:"",fields:[{key:"date",label:"Date (YYYY-MM-DD)",sortable:!0},{key:"shift_time",label:"Shift",sortable:!0},{key:"length",label:"Shift length",sortable:!0},{key:"completed",label:"Completed",sortable:!0}],items:[]}},created:function(){this.loadConfirmed()},methods:{loadConfirmed:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.next=3,u.a.get("/api/shifts/myshifts");case 3:for(t.requests=e.sent,s=0;s<t.requests.data.length;s++)i={_id:t.requests.data[s]._id,date:t.requests.data[s].date,shift_time:t.requests.data[s].time_from+" - "+t.requests.data[s].time_to,length:t.requests.data[s].length,completed:t.editTime.getTime()>new Date(t.requests.data[s].date).getTime()?"Completed!":t.editTime.getTime()==new Date(t.requests.data[s].date).getTime()?"Today shift!":"Next shift!"},t.items.push(i);t.getWorkedHours(),t.showBtn=!!t.items.find((function(t){var e=t.completed;return"Next shift!"===e})),t.isBusy=!1;case 8:case"end":return e.stop()}}),e)})))()},showNextShift:function(){this.editWeek=!0;var t=-1,e=null;while(++t<this.items.length&&new Date(this.items[t].date)<new Date);e=this.items[t].date||(new Date).getFullYear()+"-"+("0"+((new Date).getMonth()+1)).slice(-2)+"-"+("0"+(new Date).getDate()).slice(-2),this.keyword=e},nextDay:function(){var t=new Date(this.keyword);t.setDate(t.getDate()+1),this.keyword=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)},previousDay:function(){var t=new Date(this.keyword);t.setDate(t.getDate()-1),this.keyword=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)},allShifts:function(){this.keyword="",this.editWeek=!1},back:function(){this.edit=!1,this.add=!1,this.timeFrom="",this.timeTo="",this.date="",this.error=""},getWorkedHours:function(){for(var t=0;t<this.items.length;t++)"Completed!"==this.items[t].completed&&new Date(this.items[t].date).getMonth()==(new Date).getMonth()&&(this.time+=60*this.items[t].length.substring(0,2)+1*this.items[t].length.substring(3,5));this.time=this.time/60+" hours"}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])(["isAdmin"])),Object(o["c"])(["isManager"])),{},{filterList:function(){var t=this;return this.keyword?this.requests.filter((function(e){return e.date.includes(t.keyword)})):this.requests}})},d=m,c=s("2877"),b=Object(c["a"])(d,i,a,!1,null,null,null);e["default"]=b.exports},"34cc":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"mngrequests"}},[!0===t.edit||t.editWeek?t._e():s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"warning"},on:{click:function(e){return t.showNextWeek()}}},[t._v("Edit shifts for the next week")]),!0!==t.edit&&t.editWeek?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"warning"},on:{click:function(e){return t.allShifts()}}},[t._v("Show all requests")]):t._e(),!0!==t.edit?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"outline-dark"},on:{click:function(e){return t.$bvToast.show("help-toast")}}},[t._v("Help")]):t._e(),s("br"),!0!==t.edit&&t.editWeek&&new Date(t.keyword).getTime()!==new Date(t.min).getTime()?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"primary"},on:{click:function(e){return t.previousDay()}}},[t._v("Previous day")]):t._e(),!0!==t.edit&&t.editWeek&&new Date(t.keyword).getTime()!==new Date(t.max).getTime()?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"primary"},on:{click:function(e){return t.nextDay()}}},[t._v("Next day")]):t._e(),s("b-toast",{staticStyle:{},attrs:{id:"help-toast",title:"Shift helper",static:"","no-auto-hide":""}},[s("p",[t._v(" If you want confirm shifts for the next week, click button "),s("b",[t._v("Edit shift for the next week")]),t._v(". Shift requests are displayed for each day ("),s("b",[t._v("Next day")]),t._v(" and "),s("b",[t._v("Previus day")]),t._v(" buttons). W\\hen you edit shifts for a given day, you must save them using the button "),s("b",[t._v("Save the day")])])]),t.editWeek&&!0!==t.edit?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 float-right",attrs:{variant:"success"},on:{click:function(e){return t.updateAll()}}},[t._v("Save the day")]):t._e(),s("b-toast",{attrs:{id:"my-toast",variant:"success",solid:""},scopedSlots:t._u([{key:"toast-title",fn:function(){return[s("div",{staticClass:"d-flex flex-grow-1 align-items-baseline"},[s("b-img",{staticClass:"mr-2",attrs:{blank:"","blank-color":"green",width:"12",height:"12"}}),s("strong",{staticClass:"mr-auto"},[t._v("Message!")]),s("small",{staticClass:"text-muted mr-2"},[t._v("now")])],1)]},proxy:!0}])},[t._v(" "+t._s(t.message)+" ")]),!0!==t.edit&&!0!==t.add?s("b-input-group",[s("b-form-datepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{id:"filter-input",min:t.min,max:t.max,locale:"en",placeholder:"Choose a date for filter shifts"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),s("b-input-group-append",[s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{disabled:!t.keyword},on:{click:function(e){t.keyword="",t.editWeek=""}}},[t._v("Clear")])],1)],1):t._e(),s("div",{staticClass:"resp-table"},[!0!==t.edit&&!0!==t.add?s("b-table",{ref:"table",attrs:{items:t.items,fields:t.fields,filter:t.keyword,"sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy,"head-variant":"dark",responsive:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center text-dark my-2"},[s("b-spinner",{staticClass:"align-middle",attrs:{variant:"dark"}}),s("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(action)",fn:function(e){return[t.editWeek?s("b-button",{attrs:{block:"",variant:"dark"},on:{click:function(s){return t.editRequest(e.item)}}},[t._v("Edit")]):t._e(),t.editWeek?s("b-button",{attrs:{block:"",variant:"danger"},on:{click:function(s){return t.remove(e.item)}}},[t._v("Delete")]):t._e()]}}],null,!1,1402615265)}):t._e()],1),1==t.edit?s("div",{staticClass:"edit"},[s("h2",[t._v("Edit shift request"),s("br"),t._v(t._s(t.date))]),t.error?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v(t._s(t.error))]):t._e(),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.editRequest()}}},[s("b-form-timepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{locale:"cs",placeholder:"Choose time from:"},model:{value:t.timeFrom,callback:function(e){t.timeFrom=e},expression:"timeFrom"}}),s("b-form-timepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{locale:"cs",placeholder:"Choose time to:",value:"23:50"},model:{value:t.timeTo,callback:function(e){t.timeTo=e},expression:"timeTo"}}),t.timeFrom>t.timeTo?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v("Your shift must start earlier than ends. (Start < End)")]):t._e(),s("b-button",{attrs:{block:"",variant:"success",type:"submit"}},[t._v("Confirm")]),s("b-button",{attrs:{block:"",variant:"outline-dark"},on:{click:function(e){return t.back()}}},[t._v("Back")])],1)],1):t._e()],1)},a=[],r=(s("4de4"),s("caad"),s("fb6a"),s("b0c0"),s("2532"),s("5530")),n=(s("96cf"),s("1da1")),o=s("2f62"),l=s("bc3a"),u=s.n(l),m={data:function(){var t=new Date,e=new Date;return t.setDate(t.getDate()+(7-t.getDay())+1),e.setDate(e.getDate()+(7-e.getDay())+7),{isBusy:!1,editWeek:!1,requests:[],keyword:null,edit:!1,add:!1,sortBy:"date",sortDesc:!1,id:"",date:"",timeFrom:"",timeTo:"",min:t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2),max:e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),message:"",error:"",fields:[{key:"fullname",label:"Full Name",sortable:!0},{key:"position",label:"Employee position",sortable:!0},{key:"date",label:"Date (YYYY-MM-DD)",sortable:!0},{key:"time_from",label:"Start shift (HH:mm)",sortable:!0},{key:"time_to",label:"End shift (HH:mm)",sortable:!0}],items:[]}},created:function(){this.loadRequests()},methods:{editRequest:function(t){var e=this;if(this.edit)if(60*this.timeTo.substring(0,2)+1*this.timeTo.substring(3,5)-(60*this.timeFrom.substring(0,2)+1*this.timeFrom.substring(3,5))<60)this.error="The shift must last at least 1 hour";else if(1*this.timeFrom.substring(0,2)>1*this.timeTo.substring(0,2))this.error="You can do shifts only in one day, if you want do night shift, split shift into individual days.";else{var s={time_from:this.timeFrom.substring(0,5),time_to:this.timeTo.substring(0,5)};u.a.put("/api/shifts/update/"+this.id,s).then((function(t){e.message=t.data.msg,e.$bvToast.show("my-toast")})),this.error="",this.timeFrom="",this.timeTo="",this.date="",this.items=[],this.loadRequests(),this.edit=!1}else this.edit=!0,this.date=t.date,this.id=t._id,this.timeFrom=t.time_from,this.timeTo=t.time_to},updateAll:function(){for(var t=0;t<this.requests.length;t++)new Date(this.requests[t].date).getTime()===new Date(this.keyword).getTime()&&this.confirmRequests(this.requests[t]);this.message="Shifts for the day has been confirmed!",this.$bvToast.show("my-toast"),this.items=[],this.loadRequests()},confirmRequests:function(t){var e={time_from:t.time_from.substring(0,5),time_to:t.time_to.substring(0,5),request:!1};u.a.put("/api/shifts/update/"+t._id,e).then((function(){})),this.error="",this.timeFrom="",this.timeTo="",this.date=""},remove:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:u.a.delete("/api/shifts/delete/"+t._id).then((function(t){e.message=t.data.msg,e.$bvToast.show("my-toast")})),e.items=[],e.loadRequests();case 3:case"end":return s.stop()}}),s)})))()},loadRequests:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.next=3,u.a.get("/api/shifts/requests");case 3:for(t.requests=e.sent,s=0;s<t.requests.data.length;s++)i={_id:t.requests.data[s]._id,fullname:t.requests.data[s].owner.name+" "+t.requests.data[s].owner.lastname+" - "+t.requests.data[s].owner.email,position:t.requests.data[s].owner.position.name,date:t.requests.data[s].date,time_from:t.requests.data[s].time_from,time_to:t.requests.data[s].time_to},t.items.push(i);t.requests=t.requests.data,t.isBusy=!1;case 7:case"end":return e.stop()}}),e)})))()},showNextWeek:function(){this.editWeek=!0,this.fields.push({key:"action",label:"Action",sortable:!0,tdClass:"actionBar"});var t=new Date;t.setDate(t.getDate()+(7-t.getDay())+1),this.keyword=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)},nextDay:function(){var t=new Date(this.keyword);t.getTime()<new Date(this.max).getTime()&&(t.setDate(t.getDate()+1),this.keyword=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2))},previousDay:function(){var t=new Date(this.keyword);t.getTime()>new Date(this.min).getTime()&&(t.setDate(t.getDate()-1),this.keyword=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2))},allShifts:function(){this.keyword="",this.editWeek=!1,this.fields=[{key:"fullname",label:"Full Name",sortable:!0},{key:"position",label:"Employee position",sortable:!0},{key:"date",label:"Date (YYYY-MM-DD)",sortable:!0},{key:"time_from",label:"Start shift (HH:mm)",sortable:!0},{key:"time_to",label:"End shift (HH:mm)",sortable:!0}]},back:function(){this.edit=!1,this.add=!1,this.timeFrom="",this.timeTo="",this.date="",this.error=""}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])(["isAdmin"])),Object(o["c"])(["isManager"])),{},{filterList:function(){var t=this;return this.keyword?this.requests.filter((function(e){return e.date.includes(t.keyword)})):this.requests}})},d=m,c=s("2877"),b=Object(c["a"])(d,i,a,!1,null,null,null);e["default"]=b.exports},"375b":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"requests"}},[!0!==t.edit&&!0!==t.add?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"success"},on:{click:function(e){return t.addRequest()}}},[t._v("Add a new shift request")]):t._e(),!0!==t.edit&&!0!==t.add?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"outline-dark"},on:{click:function(e){return t.$bvToast.show("help-toast")}}},[t._v("Help")]):t._e(),s("b-toast",{attrs:{id:"help-toast",title:"Shift helper",static:"","no-auto-hide":""}},[s("p",[t._v(" You can submit your shift requests on this page. If you have time all day, enter the time from 00:00 to 23:59. The shift can only be entered for one day, if you want to do a night shift, you must divide the shifts into two days. ")])]),s("b-toast",{attrs:{id:"my-toast",variant:"success",solid:""},scopedSlots:t._u([{key:"toast-title",fn:function(){return[s("div",{staticClass:"d-flex flex-grow-1 align-items-baseline"},[s("b-img",{staticClass:"mr-2",attrs:{blank:"","blank-color":"green",width:"12",height:"12"}}),s("strong",{staticClass:"mr-auto"},[t._v("Message!")]),s("small",{staticClass:"text-muted mr-2"},[t._v("now")])],1)]},proxy:!0}])},[t._v(" "+t._s(t.message)+" ")]),!0!==t.edit&&!0!==t.add?s("b-input-group",[s("b-form-datepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{id:"filter-input",locale:"en",placeholder:"Choose a date for filter shifts"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),s("b-input-group-append",[s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{disabled:!t.keyword},on:{click:function(e){t.keyword=""}}},[t._v("Clear")])],1)],1):t._e(),s("div",{staticClass:"resp-table"},[!0!==t.edit&&!0!==t.add?s("b-table",{ref:"table",attrs:{items:t.requests,fields:t.fields,filter:t.keyword,"sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy,"head-variant":"dark",responsive:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center text-dark my-2"},[s("b-spinner",{staticClass:"align-middle",attrs:{variant:"dark"}}),s("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(action)",fn:function(e){return[new Date(e.item.date).getTime()>t.maxEditDate.getTime()?s("b-button",{attrs:{block:"",variant:"dark"},on:{click:function(s){return t.editRequest(e.item)}}},[t._v("Edit")]):t._e(),new Date(e.item.date).getTime()>t.maxEditDate.getTime()?s("b-button",{attrs:{block:"",variant:"danger"},on:{click:function(s){return t.remove(e.item)}}},[t._v("Delete")]):t._e(),new Date(e.item.date).getTime()<t.maxEditDate.getTime()?s("p",{staticStyle:{"text-align":"center"}},[t._v("Waiting for approval!")]):t._e()]}}],null,!1,1535859014)}):t._e()],1),1==t.edit?s("div",{staticClass:"edit"},[s("h2",[t._v("Edit shift request"),s("br"),t._v(t._s(t.date))]),t.error?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v(t._s(t.error))]):t._e(),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.editRequest(null)}}},[s("b-form-timepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{locale:"cs",placeholder:"Choose time from:"},model:{value:t.timeFrom,callback:function(e){t.timeFrom=e},expression:"timeFrom"}}),s("b-form-timepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{locale:"cs",placeholder:"Choose time to:",value:"23:50"},model:{value:t.timeTo,callback:function(e){t.timeTo=e},expression:"timeTo"}}),t.timeFrom>t.timeTo?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v("Your shift must start earlier than ends. (Start < End)")]):t._e(),s("b-button",{attrs:{block:"",variant:"dark",type:"submit"}},[t._v("Edit")]),s("b-button",{attrs:{block:"",variant:"outline-dark"},on:{click:function(e){return t.back()}}},[t._v("Back")])],1)],1):t._e(),1==t.add?s("div",{staticClass:"edit"},[s("h2",[t._v("Add new shift request")]),t.error?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v(t._s(t.error))]):t._e(),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.addRequest()}}},[s("b-form-datepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{min:t.min,max:t.max,id:"filter-input",locale:"en",required:"",placeholder:"Choose a date:","data-toggle":"tooltip","data-placement":"top",title:"Requests must be 14 days before.."},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),s("b-form-timepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",locale:"cs",placeholder:"Start shift:"},model:{value:t.timeFrom,callback:function(e){t.timeFrom=e},expression:"timeFrom"}}),s("b-form-timepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",locale:"cs",placeholder:"End shift:"},model:{value:t.timeTo,callback:function(e){t.timeTo=e},expression:"timeTo"}}),t.timeFrom>t.timeTo?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v("Your shift must start earlier than ends. (Start < End)")]):t._e(),s("b-button",{attrs:{block:"",variant:"dark",type:"submit"}},[t._v("Add")]),s("b-button",{attrs:{block:"",variant:"outline-dark"},on:{click:function(e){return t.back()}}},[t._v("Back")])],1)],1):t._e()],1)},a=[],r=(s("4de4"),s("caad"),s("2532"),s("96cf"),s("1da1")),n=s("5530"),o=s("2f62"),l=s("bc3a"),u=s.n(l),m={data:function(){var t=new Date,e=new Date;return e.setDate(e.getDate()+(7-e.getDay())+7),t.setDate(t.getDate()+(7-t.getDay())+8),{isBusy:!1,requests:[],keyword:null,edit:!1,add:!1,sortBy:"date",sortDesc:!0,id:"",date:"",timeFrom:"",timeTo:"",maxEditDate:e,min:t,max:"",message:"",error:"",fields:[{key:"date",label:"Date (YYYY-MM-DD)",sortable:!0},{key:"time_from",label:"Start shift (HH:mm)",sortable:!0},{key:"time_to",label:"End shift (HH:mm)",sortable:!0},{key:"action",label:"Action",sortable:!0,tdClass:"actionBar"}]}},created:function(){this.loadRequests()},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])(["logout"])),{},{addRequest:function(){var t=this;if(this.add)if(this.timeFrom&&this.timeTo&&this.date)if(60*this.timeTo.substring(0,2)+1*this.timeTo.substring(3,5)-(60*this.timeFrom.substring(0,2)+1*this.timeFrom.substring(3,5))<60)this.error="The shift must last at least 1 hour";else if(1*this.timeFrom.substring(0,2)>1*this.timeTo.substring(0,2))this.error="You can do shifts only in one day, if you want do night shift, split shift into individual days.";else{var e={time_from:this.timeFrom.substring(0,5),time_to:this.timeTo.substring(0,5),date:this.date};u.a.post("/api/shifts/newrequest/",e).then((function(e){t.message=e.data.msg,t.$bvToast.show("my-toast"),t.timeFrom="",t.timeTo="",t.date="",t.error="",t.requests=[],t.add=!1,t.loadRequests()})).catch((function(e){t.error=e.response.data.msg}))}else this.error="You must fill all inputs!";else this.add=!0},editRequest:function(t){var e=this;if(this.edit)if(this.timeFrom&&this.timeTo)if(60*this.timeTo.substring(0,2)+1*this.timeTo.substring(3,5)-(60*this.timeFrom.substring(0,2)+1*this.timeFrom.substring(3,5))<60)this.error="The shift must last at least 1 hour";else if(1*this.timeFrom.substring(0,2)>1*this.timeTo.substring(0,2))this.error="You can do shifts only in one day, if you want do night shift, split shift into individual days.";else{var s={time_from:this.timeFrom.substring(0,5),time_to:this.timeTo.substring(0,5)};u.a.put("/api/shifts/update/"+this.id,s).then((function(t){e.message=t.data.msg,e.items=[],e.loadRequests()})),this.$bvToast.show("my-toast"),this.error="",this.timeFrom="",this.timeTo="",this.date="",this.requests=[],this.loadRequests(),this.edit=!1}else this.error="You must fill all inputs!";else this.edit=!0,this.date=t.date,this.id=t._id,this.timeFrom=t.time_from,this.timeTo=t.time_to},remove:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:u.a.delete("/api/shifts/delete/"+t._id).then((function(t){e.message=t.data.msg,e.$bvToast.show("my-toast")})),e.requests=[],e.loadRequests();case 3:case"end":return s.stop()}}),s)})))()},loadRequests:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.next=3,u.a.get("/api/shifts/myrequests");case 3:t.requests=e.sent,t.requests=t.requests.data,t.isBusy=!1;case 6:case"end":return e.stop()}}),e)})))()},back:function(){this.edit=!1,this.add=!1,this.timeFrom="",this.timeTo="",this.date="",this.error=""}}),computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])(["isAdmin"])),Object(o["c"])(["isManager"])),{},{filterList:function(){var t=this;return this.keyword?this.requests.filter((function(e){return e.date.includes(t.keyword)})):this.requests}})},d=m,c=s("2877"),b=Object(c["a"])(d,i,a,!1,null,null,null);e["default"]=b.exports},6507:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"positions"}},[!0!==t.edit&&!0!==t.add&&t.isAdmin?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{variant:"success"},on:{click:function(e){return t.addNewPosition()}}},[t._v("Add new position")]):t._e(),s("b-toast",{attrs:{id:"my-toast",variant:"success",solid:""},scopedSlots:t._u([{key:"toast-title",fn:function(){return[s("div",{staticClass:"d-flex flex-grow-1 align-items-baseline"},[s("b-img",{staticClass:"mr-2",attrs:{blank:"","blank-color":"green",width:"12",height:"12"}}),s("strong",{staticClass:"mr-auto"},[t._v("Message!")]),s("small",{staticClass:"text-muted mr-2"},[t._v("now")])],1)]},proxy:!0}])},[t._v(" "+t._s(t.message)+" ")]),!0!==t.edit&&!0!==t.add?s("b-input-group",[s("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{id:"filter-input",type:"search",placeholder:"Search by name, description and salary"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),s("b-input-group-append",[s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{disabled:!t.keyword},on:{click:function(e){t.keyword=""}}},[t._v("Clear")])],1)],1):t._e(),s("div",{staticClass:"resp-table"},[!0!==t.edit&&!0!==t.add?s("b-table",{ref:"table",attrs:{items:t.positions,fields:t.fields,filter:t.keyword,busy:t.isBusy,"head-variant":"dark",responsive:""},scopedSlots:t._u([{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center text-dark my-2"},[s("b-spinner",{staticClass:"align-middle",attrs:{variant:"dark"}}),s("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(show_employees)",fn:function(e){return[s("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"dark"},on:{click:e.toggleDetails}},[t._v(" "+t._s(e.detailsShowing?"Hide":"Show")+" employees ")])]}},{key:"row-details",fn:function(e){return[s("b-card",t._l(e.item.employees,(function(e){return s("span",{key:e.id},[t._v(" "+t._s(e.name+" "+e.lastname+" - "+e.email)+" "),s("b",[t._v(" | ")])])})),0)]}},{key:"cell(action)",fn:function(e){return[s("b-button",{attrs:{block:"",variant:"dark"},on:{click:function(s){return t.editPosition(e.item)}}},[t._v("Edit")]),s("b-button",{attrs:{block:"",variant:"danger"},on:{click:function(s){return t.remove(e.item)}}},[t._v("Delete")])]}}],null,!1,3097917116)}):t._e()],1),1==t.edit?s("div",{staticClass:"edit"},[s("h2",[t._v("Edit position")]),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.editPosition(null)}}},[s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",placeholder:"Name of position"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",placeholder:"Default salary (hourly or fixed wage)"},model:{value:t.defaultSalary,callback:function(e){t.defaultSalary=e},expression:"defaultSalary"}}),s("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",placeholder:"Enter description of position...",rows:"3"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),s("b-button",{attrs:{block:"",variant:"dark",type:"submit"}},[t._v("Edit")]),s("b-button",{attrs:{block:"",variant:"outline-dark"},on:{click:function(e){return t.back()}}},[t._v("Back")])],1)],1):t._e(),1==t.add?s("div",{staticClass:"edit"},[s("h2",[t._v("Add new position")]),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.addNewPosition()}}},[s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",placeholder:"Name of position"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",placeholder:"Default salary (hourly or fixed wage)"},model:{value:t.defaultSalary,callback:function(e){t.defaultSalary=e},expression:"defaultSalary"}}),s("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",placeholder:"Enter description of position...",rows:"3"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),s("b-button",{attrs:{block:"",variant:"dark",type:"submit"}},[t._v("Add")]),s("b-button",{attrs:{block:"",variant:"outline-dark"},on:{click:function(e){return t.back()}}},[t._v("Back")])],1)],1):t._e()],1)},a=[],r=(s("a4d3"),s("e01a"),s("4de4"),s("caad"),s("b0c0"),s("2532"),s("5530")),n=(s("96cf"),s("1da1")),o=s("2f62"),l=s("bc3a"),u=s.n(l),m={data:function(){return{isBusy:!1,positions:[],keyword:null,edit:!1,add:!1,id:"",name:"",description:"",defaultSalary:"",message:"",fields:[{key:"name",label:"Name",sortable:!0},{key:"description",label:"Position specification",sortable:!0},{key:"default_salary",label:"Default salary",sortable:!0},{key:"show_employees",label:"Employees",tdClass:"actionBar"}]}},created:function(){this.loadPositions()},methods:{addNewPosition:function(){var t=this;if(this.add){var e={name:this.name,description:this.description,default_salary:this.defaultSalary};u.a.post("/api/jobpositions/new/",e).then((function(e){t.message=e.data.msg})),this.name="",this.description="",this.defaultSalary="",this.$bvToast.show("my-toast"),this.positions=[],this.add=!1,this.loadPositions()}else this.add=!0},editPosition:function(t){var e=this;if(this.edit){var s={name:this.name,description:this.description,default_salary:this.defaultSalary};u.a.put("/api/jobpositions/update/"+this.id,s).then((function(t){e.name="",e.description="",e.defaultSalary="",e.message=t.data.msg,e.$bvToast.show("my-toast"),e.positions=[],e.edit=!1}))}else this.edit=!0,this.id=t._id,this.name=t.name,this.description=t.description,this.defaultSalary=t.default_salary},remove:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:u.a.delete("/api/jobpositions/delete/"+t._id).then((function(t){e.message=t.data.msg,e.$bvToast.show("my-toast"),e.positions=[],e.loadPositions()}));case 1:case"end":return s.stop()}}),s)})))()},loadPositions:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.next=3,u.a.get("/api/jobpositions/all");case 3:t.positions=e.sent,t.positions=t.positions.data,t.isBusy=!1;case 6:case"end":return e.stop()}}),e)})))()},back:function(){this.edit=!1,this.add=!1,this.name="",this.description="",this.defaultSalary=""}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isAdmin&&t.fields.push({key:"action",label:"Action",tdClass:"actionBar"});case 1:case"end":return e.stop()}}),e)})))()},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])(["isAdmin"])),Object(o["c"])(["isManager"])),{},{filterList:function(){var t=this;return this.keyword?this.positions.filter((function(e){return e.name.includes(t.keyword)||e.description.includes(t.keyword)||e.defaultSalary.includes(t.keyword)})):this.positions}})},d=m,c=s("2877"),b=Object(c["a"])(d,i,a,!1,null,null,null);e["default"]=b.exports},"73cf":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"registerForm"}},[s("h2",{attrs:{align:"center"}},[t._v("Register employee")]),s("b-toast",{attrs:{id:"my-toast",variant:"success",solid:""},scopedSlots:t._u([{key:"toast-title",fn:function(){return[s("div",{staticClass:"d-flex flex-grow-1 align-items-baseline"},[s("b-img",{staticClass:"mr-2",attrs:{blank:"","blank-color":"green",width:"12",height:"12"}}),s("strong",{staticClass:"mr-auto"},[t._v("Message!")]),s("small",{staticClass:"text-muted mr-2"},[t._v("now")])],1)]},proxy:!0}])},[t._v(" "+t._s(t.message)+" ")]),t.error?s("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(t._s(t.error))]):t._e(),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.registerUser(e)}}},[s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{placeholder:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{placeholder:"Lastname"},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",type:"email",placeholder:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("b-form-group",{attrs:{id:"role"}},[s("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{options:t.roles,required:""},model:{value:t.role,callback:function(e){t.role=e},expression:"role"}}),s("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{options:t.positions,required:""},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}}),s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{block:"",variant:"outline-warning",to:"/positions"}},[t._v("Add position")]),s("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{options:t.workingTimes,required:""},model:{value:t.workingTime,callback:function(e){t.workingTime=e},expression:"workingTime"}}),s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{block:"",variant:"outline-warning",to:"/workingtimes"}},[t._v("Add working time")])],1),s("b-button",{attrs:{block:"",variant:"dark",type:"submit"}},[t._v("Register")])],1)],1)},a=[],r=(s("b0c0"),s("96cf"),s("1da1")),n=s("5530"),o=s("2f62"),l=s("bc3a"),u=s.n(l),m={data:function(){return{message:"",name:"",lastname:"",email:"",error:"",role:null,roles:[{text:"Choose role..",value:null},{text:"Manager",value:"manager"},{text:"Employee",value:"employee"}],position:null,positions:[{text:"Choose position",value:null}],workingTime:null,workingTimes:[{text:"Choose working time",value:null}]}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])(["isAdmin"])),Object(o["c"])(["isManager"])),Object(o["c"])(["user"])),created:function(){this.setSelects()},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])(["register"])),{},{registerUser:function(){var t=this;this.error="";var e={name:this.name,lastname:this.lastname,email:this.email,position:this.position,workingTime:this.workingTime,role:this.role};this.register(e).then((function(e){e.data.success&&(t.message=e.data.msg,t.$bvToast.show("my-toast"),t.name="",t.lastname="",t.email="",t.role=null,t.position=null,t.workingTime=null)})).catch((function(e){t.error=e.response.data.msg}))},setSelects:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:u.a.get("/api/jobpositions/all").then((function(e){for(var s=0;s<e.data.length;s++)t.positions.push({text:e.data[s].name,value:e.data[s]._id})})),u.a.get("/api/workingtimes/all").then((function(e){for(var s=0;s<e.data.length;s++)t.workingTimes.push({text:e.data[s].name,value:e.data[s]._id})})),"admin"==t.user.user.role&&t.roles.push({text:"Administrator",value:"admin"});case 3:case"end":return e.stop()}}),e)})))()}})},d=m,c=s("2877"),b=Object(c["a"])(d,i,a,!1,null,null,null);e["default"]=b.exports},"7db0":function(t,e,s){"use strict";var i=s("23e7"),a=s("b727").find,r=s("44d2"),n=s("ae40"),o="find",l=!0,u=n(o);o in[]&&Array(1)[o]((function(){l=!1})),i({target:"Array",proto:!0,forced:l||!u},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r(o)},9703:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"notFound"}},[s("h2",[t._v("404")]),s("h3",[t._v("The page you are looking for was not found.")]),s("router-link",{staticClass:"btn btn-link",attrs:{to:"/login"}},[t._v("Back to log in")])],1)},a=[],r=s("2877"),n={},o=Object(r["a"])(n,i,a,!1,null,null,null);e["default"]=o.exports},a55b:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"loginForm"}},[s("h2",{attrs:{align:"center"}},[t._v("Log in")]),t.error?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v(t._s(t.error))]):t._e(),this.$route.query.msg?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"info"}},[t._v(" "+t._s(this.$route.query.msg))]):t._e(),this.$route.query.msgErr?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v(" "+t._s(this.$route.query.msgErr))]):t._e(),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.loginUser(e)}}},[s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{type:"email",id:"email",name:"email",required:"",placeholder:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{type:"password",id:"password",name:"password",placeholder:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("b-button",{attrs:{block:"",variant:"dark",type:"submit"}},[t._v("Log in")]),s("b-button",{staticStyle:{"margin-bottom":"3%"},attrs:{block:"",variant:"primary"},on:{click:function(e){return t.$bvToast.show("example-toast")}}},[t._v(" Forgotten password? ")]),s("b-toast",{attrs:{id:"example-toast",title:"Forgotten password",static:"","no-auto-hide":""}},[t._v(" If you have forgotten your password, contact the administrator! ")])],1)],1)},a=[],r=s("5530"),n=s("2f62"),o={data:function(){return{email:"",password:"",error:""}},methods:Object(r["a"])(Object(r["a"])({},Object(n["b"])(["login"])),{},{loginUser:function(){var t=this,e={email:this.email,password:this.password};this.login(e).then((function(){t.$router.push("/profile")})).catch((function(e){t.error=e.response.data.msg}))}})},l=o,u=s("2877"),m=Object(u["a"])(l,i,a,!1,null,null,null);e["default"]=m.exports},a9f6:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"workingTimes"}},[!0!==t.edit&&!0!==t.add&&t.isAdmin?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{variant:"success"},on:{click:function(e){return t.addNewWorkingTime()}}},[t._v("Add new working time")]):t._e(),s("b-toast",{attrs:{id:"my-toast",variant:"success",solid:""},scopedSlots:t._u([{key:"toast-title",fn:function(){return[s("div",{staticClass:"d-flex flex-grow-1 align-items-baseline"},[s("b-img",{staticClass:"mr-2",attrs:{blank:"","blank-color":"green",width:"12",height:"12"}}),s("strong",{staticClass:"mr-auto"},[t._v("Message!")]),s("small",{staticClass:"text-muted mr-2"},[t._v("now")])],1)]},proxy:!0}])},[t._v(" "+t._s(t.message)+" ")]),!0!==t.edit&&!0!==t.add?s("b-input-group",[s("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{id:"filter-input",type:"search",placeholder:"Search by name and hours"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),s("b-input-group-append",[s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{disabled:!t.keyword},on:{click:function(e){t.keyword=""}}},[t._v("Clear")])],1)],1):t._e(),s("div",{staticClass:"resp-table"},[!0!==t.edit&&!0!==t.add?s("b-table",{ref:"table",attrs:{items:t.workingTimes,fields:t.fields,filter:t.keyword,busy:t.isBusy,"head-variant":"dark",responsive:""},scopedSlots:t._u([{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center text-dark my-2"},[s("b-spinner",{staticClass:"align-middle",attrs:{variant:"dark"}}),s("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(show_employees)",fn:function(e){return[s("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"dark"},on:{click:e.toggleDetails}},[t._v(" "+t._s(e.detailsShowing?"Hide":"Show")+" employees ")])]}},{key:"row-details",fn:function(e){return[s("b-card",t._l(e.item.employees,(function(e){return s("span",{key:e.id},[t._v(" "+t._s(e.name+" "+e.lastname+" - "+e.email)+" "),s("b",[t._v(" | ")])])})),0)]}},{key:"cell(action)",fn:function(e){return[s("b-button",{attrs:{block:"",variant:"dark"},on:{click:function(s){return t.editWorkingTime(e.item)}}},[t._v("Edit")]),s("b-button",{attrs:{block:"",variant:"danger"},on:{click:function(s){return t.remove(e.item)}}},[t._v("Delete")])]}}],null,!1,3258457745)}):t._e()],1),1==t.edit?s("div",{staticClass:"edit"},[s("h2",[t._v("Edit working time")]),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.editWorkingTime(null)}}},[s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{placeholder:"Working time name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{placeholder:"Working hours"},model:{value:t.hours,callback:function(e){t.hours=e},expression:"hours"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",placeholder:"Holiday hours"},model:{value:t.holidayHours,callback:function(e){t.holidayHours=e},expression:"holidayHours"}}),s("b-button",{attrs:{block:"",variant:"dark",type:"submit"}},[t._v("Edit")]),s("b-button",{attrs:{block:"",variant:"outline-dark"},on:{click:function(e){return t.back()}}},[t._v("Back")])],1)],1):t._e(),1==t.add?s("div",{staticClass:"edit"},[s("h2",[t._v("Add working time")]),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.addNewWorkingTime()}}},[s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{placeholder:"Working time name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{placeholder:"Working hours"},model:{value:t.hours,callback:function(e){t.hours=e},expression:"hours"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",placeholder:"Holiday hours"},model:{value:t.holidayHours,callback:function(e){t.holidayHours=e},expression:"holidayHours"}}),s("b-button",{attrs:{block:"",variant:"dark",type:"submit"}},[t._v("Add")]),s("b-button",{attrs:{block:"",variant:"outline-dark"},on:{click:function(e){return t.back()}}},[t._v("Back")])],1)],1):t._e()],1)},a=[],r=(s("4de4"),s("caad"),s("b0c0"),s("2532"),s("5530")),n=(s("96cf"),s("1da1")),o=s("2f62"),l=s("bc3a"),u=s.n(l),m={data:function(){return{keyword:null,edit:!1,add:!1,workingTimes:[],id:"",name:"",hours:"",holidayHours:"",message:"",isBusy:!1,fields:[{key:"name",label:"Name",sortable:!0},{key:"hours",label:"Working hours",sortable:!0},{key:"holiday_hours",label:"Holiday hours",sortable:!0},{key:"show_employees",label:"Employees",tdClass:"actionBar"}]}},created:function(){this.loadWorkingTimes()},methods:{addNewWorkingTime:function(){var t=this;if(this.add){var e={name:this.name,hours:this.hours,holiday_hours:this.holidayHours};u.a.post("/api/workingtimes/new/",e).then((function(e){t.message=e.data.msg,t.name="",t.hours="",t.holidayHours=""})),this.$bvToast.show("my-toast"),this.workingTimes=[],this.add=!1,this.loadWorkingTimes()}else this.add=!0},editWorkingTime:function(t){var e=this;if(this.edit){var s={name:this.name,hours:this.hours,holiday_hours:this.holidayHours};u.a.put("/api/workingtimes/update/"+this.id,s).then((function(t){e.name="",e.hours="",e.holidayHours="",e.message=t.data.msg,e.$bvToast.show("my-toast"),e.workingTimes=[],e.loadWorkingTimes(),e.edit=!1}))}else this.edit=!0,this.id=t._id,this.name=t.name,this.hours=t.hours,this.holidayHours=t.holiday_hours},remove:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:u.a.delete("/api/workingtimes/delete/"+t._id).then((function(t){e.message=t.data.msg,e.$bvToast.show("my-toast"),e.workingTimes=[],e.loadWorkingTimes()}));case 1:case"end":return s.stop()}}),s)})))()},loadWorkingTimes:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.next=3,u.a.get("/api/workingtimes/all");case 3:t.workingTimes=e.sent,t.workingTimes=t.workingTimes.data,t.isBusy=!1;case 6:case"end":return e.stop()}}),e)})))()},back:function(){this.edit=!1,this.add=!1,this.name="",this.hours="",this.holidayHours=""}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isAdmin&&t.fields.push({key:"action",label:"Action",tdClass:"actionBar"});case 1:case"end":return e.stop()}}),e)})))()},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])(["isAdmin"])),Object(o["c"])(["isManager"])),{},{filterList:function(){var t=this;return this.keyword?this.workingTimes.filter((function(e){return e.name.includes(t.keyword)||e.hours.includes(t.keyword)||e.holidayHours.includes(t.keyword)})):this.workingTimes}})},d=m,c=s("2877"),b=Object(c["a"])(d,i,a,!1,null,null,null);e["default"]=b.exports},c66d:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"profile"}},[s("table",[s("tr",[s("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[s("b-avatar",{attrs:{size:"10em"}})],1)]),s("tr",[t._m(0),s("td",[t._v(t._s(t.user.user.name+" "+t.user.user.lastname))])]),s("tr",[t._m(1),s("td",[t._v(t._s(t.user.user.email))])]),t.user.user.workingTime?s("tr",[t._m(2),s("td",[t._v(" "+t._s(t.user.user.workingTime.name+" - "+t.user.user.workingTime.hours)+" ")])]):t._e(),t.user.user.workingTime?s("tr",[t._m(3),s("td",[t._v(t._s(t.user.user.workingTime.holiday_hours))])]):t._e(),t.user.user.position?s("tr",[t._m(4),s("td",[t._v(" "+t._s(t.user.user.position.name)+" - "+t._s(t.user.user.position.default_salary)+" ")])]):t._e()])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("b",[t._v("Name:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("b",[t._v("Email:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("b",[t._v("Working time:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("b",[t._v("Holiday hours:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("b",[t._v("Position:")])])}],r=s("5530"),n=s("2f62"),o={data:function(){return{users:"",edit:!1,name:"",lastname:"",position_specs:"",email:""}},computed:Object(r["a"])({},Object(n["c"])(["user"]))},l=o,u=s("2877"),m=Object(u["a"])(l,i,a,!1,null,null,null);e["default"]=m.exports},cb29:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"employees"}},[s("b-toast",{attrs:{id:"my-toast",variant:"success",solid:""},scopedSlots:t._u([{key:"toast-title",fn:function(){return[s("div",{staticClass:"d-flex flex-grow-1 align-items-baseline"},[s("b-img",{staticClass:"mr-2",attrs:{blank:"","blank-color":"green",width:"12",height:"12"}}),s("strong",{staticClass:"mr-auto"},[t._v("Message!")]),s("small",{staticClass:"text-muted mr-2"},[t._v("now")])],1)]},proxy:!0}])},[t._v(" "+t._s(t.message)+" ")]),t.edit?t._e():s("b-input-group",[s("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{id:"filter-input",type:"search",placeholder:"Search by name, lastname and email"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),s("b-input-group-append",[s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{disabled:!t.keyword},on:{click:function(e){t.keyword=""}}},[t._v("Clear")])],1)],1),s("div",{staticClass:"resp-table"},[0==t.edit?s("b-table",{ref:"table",attrs:{items:t.items,fields:t.fields,filter:t.keyword,busy:t.isBusy,"head-variant":"dark",responsive:""},scopedSlots:t._u([{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center text-dark my-2"},[s("b-spinner",{staticClass:"align-middle",attrs:{variant:"dark"}}),s("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(action)",fn:function(e){return[s("b-button",{attrs:{block:"",variant:"dark"},on:{click:function(s){return t.editUser(e.item)}}},[t._v("Edit")]),s("b-button",{attrs:{block:"",variant:"warning"},on:{click:function(s){return t.resetPassword(e.item)}}},[t._v("Reset password")]),s("b-button",{attrs:{block:"",variant:"danger"},on:{click:function(s){return t.remove(e.item)}}},[t._v("Delete")])]}}],null,!1,4240759629)}):t._e()],1),1==t.edit?s("div",{staticClass:"edit"},[s("h2",[t._v("Edit user")]),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.editUser(null)}}},[s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{placeholder:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{placeholder:"Lastname"},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}}),s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{required:"",type:"email",placeholder:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("b-form-group",[s("b-form-select",{attrs:{options:t.roles,required:""},model:{value:t.role,callback:function(e){t.role=e},expression:"role"}})],1),s("b-form-group",[s("b-form-select",{attrs:{required:"",options:t.positions},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1),s("b-form-group",[s("b-form-select",{attrs:{required:"",options:t.workingTimes},model:{value:t.workingTime,callback:function(e){t.workingTime=e},expression:"workingTime"}})],1),s("b-button",{attrs:{block:"",variant:"dark",type:"submit"}},[t._v("Edit")]),s("b-button",{attrs:{block:"",variant:"outline-dark"},on:{click:function(e){return t.back()}}},[t._v("Back")])],1)],1):t._e()],1)},a=[],r=(s("4de4"),s("7db0"),s("caad"),s("b0c0"),s("2532"),s("5530")),n=(s("96cf"),s("1da1")),o=s("2f62"),l=s("bc3a"),u=s.n(l),m={data:function(){return{users:[],keyword:null,edit:!1,isBusy:!1,id:"",name:"",lastname:"",email:"",message:"",position:null,positions:[{text:"Choose position",value:null}],workingTime:null,workingTimes:[{text:"Choose working time",value:null}],role:null,roles:[{text:"Choose role..",value:null},{text:"Administrator",value:"admin"},{text:"Manager",value:"manager"},{text:"Employee",value:"employee"}],fields:[{key:"firstname",label:"First Name",sortable:!0},{key:"lastname",label:"Last Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"role",label:"Role",sortable:!0},{key:"position",label:"Position",sortable:!0},{key:"workingTime",label:"Working time",sortable:!0}],items:[]}},created:function(){this.setProperties(),this.loadUsers()},methods:{editUser:function(t){var e=this;if(this.edit){var s={_id:this.id,name:this.name,lastname:this.lastname,email:this.email,role:this.role,position:this.position,workingTime:this.workingTime};u.a.put("/api/users/update/"+this.id,s).then((function(t){e.items=[],e.loadUsers(),e.message=t.data.msg,e.$bvToast.show("my-toast"),e.edit=!1}))}else this.edit=!0,this.id=t._id,this.name=t.firstname,this.lastname=t.lastname,this.role=this.roles.find((function(e){var s=e.text;return s===t.role})).value,this.position=void 0===t.positionId?null:t.positionId,this.workingTime=void 0===t.workingTimeId?null:t.workingTimeId,this.email=t.email},remove:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:u.a.delete("/api/users/delete/"+t._id).then((function(t){e.message=t.data.msg,e.$bvToast.show("my-toast"),e.items=[],e.loadUsers()}));case 1:case"end":return s.stop()}}),s)})))()},resetPassword:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:u.a.post("/api/users/resetpassword/"+t._id).then((function(t){e.message=t.data.msg,e.$bvToast.show("my-toast")}));case 1:case"end":return s.stop()}}),s)})))()},loadUsers:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.next=3,u.a.get("/api/users/").then((function(e){e=e.data;for(var s=0;s<e.length;s++)if(e[s].position&&e[s].workingTime){var i={_id:e[s]._id,positionId:e[s].position._id,workingTimeId:e[s].workingTime._id,firstname:e[s].name,lastname:e[s].lastname,role:t.roles.find((function(t){var i=t.value;return i===e[s].role})).text,email:e[s].email,position:e[s].position.name,workingTime:e[s].workingTime.name};t.items.push(i)}else{var a={_id:e[s]._id,firstname:e[s].name,lastname:e[s].lastname,role:t.roles.find((function(t){var i=t.value;return i===e[s].role})).text,email:e[s].email,position:"Not defined",workingTime:"Not defined"};t.items.push(a)}})).catch((function(){}));case 3:t.isBusy=!1;case 4:case"end":return e.stop()}}),e)})))()},setProperties:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:u.a.get("/api/jobpositions/all").then((function(e){for(var s=0;s<e.data.length;s++)t.positions.push({text:e.data[s].name,value:e.data[s]._id})})).catch((function(){})),u.a.get("/api/workingtimes/all").then((function(e){for(var s=0;s<e.data.length;s++)t.workingTimes.push({text:e.data[s].name,value:e.data[s]._id})})).catch((function(){}));case 2:case"end":return e.stop()}}),e)})))()},back:function(){this.edit=!1,this.add=!1,this.name="",this.lastname="",this.email="",this.workingTime="",this.position="",this.role=""}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isAdmin&&t.fields.push({key:"action",label:"Action",tdClass:"actionBar"});case 1:case"end":return e.stop()}}),e)})))()},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])(["isAdmin"])),Object(o["c"])(["isManager"])),{},{filterList:function(){var t=this;return this.keyword?this.items.filter((function(e){return e.firstname.includes(t.keyword)||e.lastname.includes(t.keyword)||e.email.includes(t.keyword)})):this.items}})},d=m,c=s("2877"),b=Object(c["a"])(d,i,a,!1,null,null,null);e["default"]=b.exports},e01a:function(t,e,s){"use strict";var i=s("23e7"),a=s("83ab"),r=s("da84"),n=s("5135"),o=s("861d"),l=s("9bf2").f,u=s("e893"),m=r.Symbol;if(a&&"function"==typeof m&&(!("description"in m.prototype)||void 0!==m().description)){var d={},c=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof c?new m(t):void 0===t?m():m(t);return""===t&&(d[e]=!0),e};u(c,m);var b=c.prototype=m.prototype;b.constructor=c;var h=b.toString,f="Symbol(test)"==String(m("test")),p=/^Symbol\((.*)\)[^)]+$/;l(b,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=h.call(t);if(n(d,t))return"";var s=f?e.slice(7,-1):e.replace(p,"$1");return""===s?void 0:s}}),i({global:!0,forced:!0},{Symbol:c})}},fb6a:function(t,e,s){"use strict";var i=s("23e7"),a=s("861d"),r=s("e8b5"),n=s("23cb"),o=s("50c4"),l=s("fc6a"),u=s("8418"),m=s("b622"),d=s("1dde"),c=s("ae40"),b=d("slice"),h=c("slice",{ACCESSORS:!0,0:0,1:2}),f=m("species"),p=[].slice,v=Math.max;i({target:"Array",proto:!0,forced:!b||!h},{slice:function(t,e){var s,i,m,d=l(this),c=o(d.length),b=n(t,c),h=n(void 0===e?c:e,c);if(r(d)&&(s=d.constructor,"function"!=typeof s||s!==Array&&!r(s.prototype)?a(s)&&(s=s[f],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return p.call(d,b,h);for(i=new(void 0===s?Array:s)(v(h-b,0)),m=0;b<h;b++,m++)b in d&&u(i,m,d[b]);return i.length=m,i}})},ff07:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"mngshifts"}},[!0===t.edit||t.editWeek?t._e():s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"warning"},on:{click:function(e){return t.showToday()}}},[t._v("Show today shifts")]),!0!==t.edit&&t.editWeek?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{variant:"warning"},on:{click:function(e){return t.allShifts()}}},[t._v("Show all shifts")]):t._e(),s("br"),!0!==t.edit&&t.editWeek?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"primary"},on:{click:function(e){return t.previousDay()}}},[t._v("Previous day")]):t._e(),!0!==t.edit&&t.editWeek?s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2 mngbtn",attrs:{variant:"primary"},on:{click:function(e){return t.nextDay()}}},[t._v("Next day")]):t._e(),s("b-toast",{attrs:{id:"my-toast",variant:"success",solid:""},scopedSlots:t._u([{key:"toast-title",fn:function(){return[s("div",{staticClass:"d-flex flex-grow-1 align-items-baseline"},[s("b-img",{staticClass:"mr-2",attrs:{blank:"","blank-color":"green",width:"12",height:"12"}}),s("strong",{staticClass:"mr-auto"},[t._v("Message!")]),s("small",{staticClass:"text-muted mr-2"},[t._v("now")])],1)]},proxy:!0}])},[t._v(" "+t._s(t.message)+" ")]),!0!==t.edit&&!0!==t.add?s("b-input-group",[s("b-form-datepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{id:"filter-input",locale:"en",placeholder:"Choose a date for filter shifts"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),s("b-input-group-append",[s("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{disabled:!t.keyword},on:{click:function(e){t.keyword="",t.editWeek=""}}},[t._v("Clear")])],1)],1):t._e(),s("div",{staticClass:"resp-table"},[!0!==t.edit&&!0!==t.add?s("b-table",{ref:"table",attrs:{items:t.items,fields:t.fields,filter:t.keyword,"sort-by":t.sortBy,"sort-desc":t.sortDesc,busy:t.isBusy,"head-variant":"dark",responsive:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center text-dark my-2"},[s("b-spinner",{staticClass:"align-middle",attrs:{variant:"dark"}}),s("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(action)",fn:function(e){return[new Date(e.item.date).getTime()>t.editTime.getTime()?s("b-button",{attrs:{block:"",variant:"dark"},on:{click:function(s){return t.editRequest(e.item)}}},[t._v("Edit")]):t._e(),new Date(e.item.date).getTime()>t.editTime.getTime()?s("b-button",{attrs:{block:"",variant:"danger"},on:{click:function(s){return t.remove(e.item)}}},[t._v("Delete")]):t._e(),new Date(e.item.date).getTime()<t.editTime.getTime()?s("p",[t._v("Completed!")]):t._e()]}}],null,!1,2726152604)}):t._e()],1),1==t.edit?s("div",{staticClass:"edit"},[s("h2",[t._v("Edit shift request"),s("br"),t._v(t._s(t.date))]),t.error?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v(t._s(t.error))]):t._e(),s("b-form",{staticClass:"justify-content-center",on:{submit:function(e){return e.preventDefault(),t.editRequest()}}},[s("b-form-timepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{locale:"cs",placeholder:"Choose time from:"},model:{value:t.timeFrom,callback:function(e){t.timeFrom=e},expression:"timeFrom"}}),s("b-form-timepicker",{staticClass:"mb-2 mr-sm-2 mb-sm-2",attrs:{locale:"cs",placeholder:"Choose time to:",value:"23:50"},model:{value:t.timeTo,callback:function(e){t.timeTo=e},expression:"timeTo"}}),t.timeFrom>t.timeTo?s("b-alert",{attrs:{show:"",dismissible:"",fade:"",variant:"danger"}},[t._v("Your shift must start earlier than ends. (Start < End)")]):t._e(),s("b-button",{attrs:{block:"",variant:"success",type:"submit"}},[t._v("Confirm")]),s("b-button",{attrs:{block:"",variant:"outline-dark"},on:{click:function(e){return t.back()}}},[t._v("Back")])],1)],1):t._e()],1)},a=[],r=(s("4de4"),s("caad"),s("fb6a"),s("b0c0"),s("2532"),s("5530")),n=(s("96cf"),s("1da1")),o=s("2f62"),l=s("bc3a"),u=s.n(l),m={data:function(){var t=new Date;return t.setDate(t.getDate()-1),{isBusy:!1,editWeek:!1,requests:[],keyword:null,edit:!1,add:!1,sortBy:"date",sortDesc:!0,id:"",date:"",editTime:t,timeFrom:"",timeTo:"",message:"",error:"",fields:[{key:"fullname",label:"Full Name",sortable:!0},{key:"position",label:"Employee position",sortable:!0},{key:"date",label:"Date (YYYY-MM-DD)",sortable:!0},{key:"time_from",label:"Start shift (HH:mm)",sortable:!0},{key:"time_to",label:"End shift (HH:mm)",sortable:!0},{key:"action",label:"Action",sortable:!0,tdClass:"actionBar"}],items:[]}},created:function(){this.loadConfirmed()},methods:{editRequest:function(t){var e=this;if(this.edit)if(60*this.timeTo.substring(0,2)+1*this.timeTo.substring(3,5)-(60*this.timeFrom.substring(0,2)+1*this.timeFrom.substring(3,5))<60)this.error="The shift must last at least 1 hour";else if(1*this.timeFrom.substring(0,2)>1*this.timeTo.substring(0,2))this.error="You can do shifts only in one day, if you want do night shift, split shift into individual days.";else{var s={time_from:this.timeFrom.substring(0,5),time_to:this.timeTo.substring(0,5),request:!1};u.a.put("/api/shifts/update/"+this.id,s).then((function(t){e.message=t.data.msg,e.loadConfirmed(),e.edit=!1,e.$bvToast.show("my-toast")})),this.error="",this.timeFrom="",this.timeTo="",this.date="",this.items=[]}else this.edit=!0,this.date=t.date,this.id=t._id,this.timeFrom=t.time_from,this.timeTo=t.time_to},remove:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:u.a.delete("/api/shifts/delete/"+t._id).then((function(t){e.message=t.data.msg,e.$bvToast.show("my-toast")})),e.items=[],e.loadConfirmed();case 3:case"end":return s.stop()}}),s)})))()},loadConfirmed:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.next=3,u.a.get("/api/shifts/confirmed");case 3:for(t.requests=e.sent,s=0;s<t.requests.data.length;s++)i={_id:t.requests.data[s]._id,fullname:t.requests.data[s].owner.name+" "+t.requests.data[s].owner.lastname+" - "+t.requests.data[s].owner.email,position:t.requests.data[s].owner.position.name,date:t.requests.data[s].date,time_from:t.requests.data[s].time_from,time_to:t.requests.data[s].time_to},t.items.push(i);t.requests=t.requests.data,t.isBusy=!1;case 7:case"end":return e.stop()}}),e)})))()},showToday:function(){this.editWeek=!0;var t=new Date;this.keyword=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)},nextDay:function(){var t=new Date(this.keyword);t.setDate(t.getDate()+1),this.keyword=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)},previousDay:function(){var t=new Date(this.keyword);t.setDate(t.getDate()-1),this.keyword=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)},allShifts:function(){this.keyword="",this.editWeek=!1},back:function(){this.edit=!1,this.add=!1,this.timeFrom="",this.timeTo="",this.date="",this.error=""}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])(["isAdmin"])),Object(o["c"])(["isManager"])),{},{filterList:function(){var t=this;return this.keyword?this.requests.filter((function(e){return e.date.includes(t.keyword)})):this.requests}})},d=m,c=s("2877"),b=Object(c["a"])(d,i,a,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=about.a7bb9e64.js.map